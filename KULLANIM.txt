# ğŸš€ JS Endpoint Scanner - KullanÄ±m Rehberi

## ğŸ“– Ne Ä°ÅŸe Yarar?

Bu araÃ§, web sitelerindeki **gizli API endpoint'lerini** otomatik olarak bulur.
- TarayÄ±cÄ± ile siteyi dolaÅŸÄ±r
- TÃ¼m network trafiÄŸini yakalar
- API Ã§aÄŸrÄ±larÄ±nÄ± (fetch, axios, XHR) listeler
- JSON formatÄ±nda sonuÃ§ verir

**KullanÄ±m AlanÄ±:** Bug bounty, penetrasyon testi, gÃ¼venlik araÅŸtÄ±rmasÄ±

---

## âš¡ HÄ±zlÄ± BaÅŸlangÄ±Ã§

### 1. Gereksinimler

```powershell
# Python 3.10+ ve Node.js 18+ gerekli
python --version
node --version
```

### 2. Kurulum (Ä°lk Kez)

```powershell
# Virtual environment oluÅŸtur
python -m venv .venv

# Aktive et
.\.venv\Scripts\Activate.ps1

# Python baÄŸÄ±mlÄ±lÄ±klarÄ±
pip install playwright

# Chromium browser indir
python -m playwright install chromium

# Node.js baÄŸÄ±mlÄ±lÄ±klarÄ±
npm install
```

### 3. KullanÄ±m

#### ğŸ¯ Temel KullanÄ±m
```powershell
python scan_website.py https://example.com
```

#### ğŸ”§ Ã–zel Ayarlar
```powershell
# Daha fazla sayfa tara (50 sayfa)
python scan_website.py https://example.com --pages 50

# Daha derin tara (5 seviye)
python scan_website.py https://example.com --pages 40 --depth 5

# HÄ±zlÄ± tarama (az sayfa)
python scan_website.py https://example.com --pages 10 --depth 2
```

#### ğŸ’¨ PowerShell Script ile (Kolay)
```powershell
# Basit
.\scan.ps1 https://example.com

# Ã–zel
.\scan.ps1 https://example.com -Pages 50 -Depth 4
```

---

## ğŸ“Š SonuÃ§lar

### Ã‡Ä±ktÄ± DosyasÄ±
Tarama bittiÄŸinde `scan-SITE_ADI.json` dosyasÄ± oluÅŸur.

**Ã–rnek iÃ§erik:**
```json
{
  "endpoints": [
    {
      "method": "GET",
      "url_template": "/api/users/{userId}",
      "protocol": "https",
      "parameters": [
        {"name": "userId", "location": "path"}
      ]
    },
    {
      "method": "DELETE",
      "url_template": "/api/products/{productId}",
      "parameters": [
        {"name": "productId", "location": "path"}
      ]
    }
  ],
  "statistics": {
    "pages_crawled": 25,
    "network_requests": 142,
    "unique_endpoints": 68,
    "duration_ms": 45230
  }
}
```

### Terminal Ã‡Ä±ktÄ±sÄ±
```
============================================================
ğŸ“Š SCAN RESULTS
============================================================
âœ“ Pages crawled: 25
âœ“ Network requests: 142
âœ“ Unique endpoints: 68
âœ“ Duration: 45230ms

============================================================
ğŸ¯ DISCOVERED API ENDPOINTS
============================================================

1. GET    /api/users/{userId}
   Parameters: userId

2. DELETE /api/products/{productId}
   Parameters: productId

3. POST   /api/orders
   Parameters: customerId, items

...

ğŸ’¾ Full results saved to: scan-example.com.json
âœ… Scan completed successfully!
```

---

## ğŸ” GerÃ§ek Ã–rnekler

### E-Ticaret Sitesi
```powershell
python scan_website.py https://www.lcw.com --pages 50 --depth 4
```

**Bulunan endpoint Ã¶rnekleri:**
- `GET /ajax/authentication/GetCurrentCustomer` â†’ IDOR testi yap
- `DELETE /ajax/users/{userId}` â†’ Authorization bypass kontrol et
- `GET /ajax/FavoriteList/GetInsiderFavoriteList` â†’ BOLA testi

### Sosyal Medya Platformu
```powershell
python scan_website.py https://www.example-social.com --pages 60
```

**Bulunabilecekler:**
- `/api/v1/messages/send` â†’ Rate limiting var mÄ±?
- `/api/v1/users/{id}/profile` â†’ BaÅŸkasÄ±nÄ±n profili okunabiliyor mu?
- `/api/v1/admin/deleteUser` â†’ Admin endpoint'i aÃ§Ä±kta mÄ±?

### API Backend
```powershell
python scan_website.py http://localhost:3000 --pages 20
```

---

## âš™ï¸ Parametreler

| Parametre | AÃ§Ä±klama | VarsayÄ±lan | Ã–rnek |
|-----------|----------|-----------|-------|
| `url` | Hedef site URL'i | (zorunlu) | `https://example.com` |
| `--pages` | Maksimum sayfa sayÄ±sÄ± | 30 | `--pages 50` |
| `--depth` | Maksimum tarama derinliÄŸi | 3 | `--depth 5` |

### Tarama HÄ±zÄ± vs Kapsam

| Ayar | SÃ¼re | Endpoint SayÄ±sÄ± | KullanÄ±m |
|------|------|----------------|----------|
| `--pages 10 --depth 2` | 1-2 dk | 20-40 | HÄ±zlÄ± keÅŸif |
| `--pages 30 --depth 3` | 3-5 dk | 50-80 | Normal tarama |
| `--pages 60 --depth 4` | 8-12 dk | 100-150 | Derin tarama |
| `--pages 100 --depth 5` | 15-20 dk | 150-250+ | Agresif tarama |

---

## ğŸ›¡ï¸ Yasal UyarÄ±

**âš ï¸ Ã–NEMLÄ°:** Bu aracÄ± kullanmadan Ã¶nce:

1. **YazÄ±lÄ± izin alÄ±n** (ÅŸirketin gÃ¼venlik ekibinden)
2. **Bug bounty programÄ±na kayÄ±t olun** (varsa)
3. **Yasal sorumluluk size aittir**

**YasadÄ±ÅŸÄ± kullanÄ±m:**
- ğŸ‡¹ğŸ‡· TCK Madde 243/1 - 2-6 yÄ±l hapis
- ğŸ‡ºğŸ‡¸ CFAA - Federal suÃ§
- ğŸ‡ªğŸ‡º GDPR ihlali

**Yasal kullanÄ±m:**
- âœ… Kendi projelerinizi test edin
- âœ… Bug bounty programlarÄ±na katÄ±lÄ±n (HackerOne, Bugcrowd)
- âœ… Åirket iÃ§i gÃ¼venlik testleri (izinle)
- âœ… Test ortamlarÄ±nÄ± kullanÄ±n (Juice Shop, DVWA)

---

## ğŸ› Sorun Giderme

### Hata: "playwright not found"
```powershell
pip install playwright
python -m playwright install chromium
```

### Hata: "Timeout exceeded"
Site Ã§ok yavaÅŸ yÃ¼kleniyor. Daha az sayfa tarÄ±yÄ±n:
```powershell
python scan_website.py https://example.com --pages 10
```

### Hata: "No endpoints found"
Site tamamen statik olabilir veya API Ã§aÄŸrÄ±larÄ± farklÄ± formatta. 
Network trafiÄŸini manuel kontrol edin.

### Chromium indirme Ã§ok yavaÅŸ
Normal - 150MB dosya indiriliyor. Ä°nternet baÄŸlantÄ±nÄ±zÄ± kontrol edin.

---

## ğŸ“ Proje YapÄ±sÄ±

```
JavaScriptEndpoint/
â”œâ”€â”€ scan_website.py       # Ana tarayÄ±cÄ± (BUNU KULLAN)
â”œâ”€â”€ scan.ps1              # PowerShell wrapper
â”œâ”€â”€ cli.js                # Node.js CLI (opsiyonel)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â””â”€â”€ extract.js    # AST parser
â”‚   â”œâ”€â”€ runtime/
â”‚   â”‚   â””â”€â”€ crawl.py      # Browser crawler
â”‚   â””â”€â”€ analysis/
â”‚       â””â”€â”€ taint.js      # GÃ¼venlik analizi
â”œâ”€â”€ lcw-scan-results.json # Ã–rnek sonuÃ§
â”œâ”€â”€ package.json          # Node baÄŸÄ±mlÄ±lÄ±klarÄ±
â””â”€â”€ requirements.txt      # Python baÄŸÄ±mlÄ±lÄ±klarÄ±
```

---

## ğŸ’¡ Ä°puÃ§larÄ±

### 1. Hedefli Tarama
Anasayfa yerine direkt kategori sayfasÄ±ndan baÅŸla:
```powershell
python scan_website.py https://example.com/products --pages 30
```

### 2. SonuÃ§larÄ± Filtreleme
```powershell
# JSON'dan sadece DELETE endpoint'leri gÃ¶ster (PowerShell)
Get-Content scan-example.com.json | ConvertFrom-Json | 
  Select-Object -ExpandProperty endpoints | 
  Where-Object {$_.method -eq "DELETE"} | 
  Select-Object method, url_template
```

### 3. Birden Fazla Site
```powershell
# Batch tarama
$sites = @("site1.com", "site2.com", "site3.com")
foreach ($site in $sites) {
    python scan_website.py "https://$site" --pages 20
}
```

### 4. SonuÃ§larÄ± KarÅŸÄ±laÅŸtÄ±rma
AynÄ± siteyi farklÄ± zamanlarda tara, yeni endpoint'leri bul:
```powershell
python scan_website.py https://example.com --pages 30
# 1 hafta sonra
python scan_website.py https://example.com --pages 30
# Ä°ki JSON dosyasÄ±nÄ± karÅŸÄ±laÅŸtÄ±r
```

---

## ğŸš€ HÄ±zlÄ± BaÅŸvuru

**En sÄ±k kullanÄ±lan komutlar:**

```powershell
# Normal tarama
python scan_website.py https://example.com

# Derin tarama
python scan_website.py https://example.com --pages 60 --depth 4

# HÄ±zlÄ± tarama
python scan_website.py https://example.com --pages 10

# PowerShell ile
.\scan.ps1 https://example.com -Pages 40
```

---

## ğŸ“ Destek

**SÄ±k karÅŸÄ±laÅŸÄ±lan sorunlar:**
1. Chromium indirme hatasÄ± â†’ Ä°nternet baÄŸlantÄ±sÄ±nÄ± kontrol et
2. Timeout hatasÄ± â†’ `--pages` deÄŸerini dÃ¼ÅŸÃ¼r
3. Endpoint bulunmuyor â†’ Site statik olabilir

**Ä°leri dÃ¼zey kullanÄ±m:**
- `src/runtime/crawl.py` dosyasÄ±nda `CrawlConfig` deÄŸerlerini deÄŸiÅŸtir
- `timeout_ms`, `simulate_user` gibi parametreleri ayarla

---

## âœ… BaÅŸarÄ±lÄ± Tarama Kontrol Listesi

- [ ] Virtual environment aktif (`(.venv)` gÃ¶rÃ¼nÃ¼yor)
- [ ] Chromium indirilmiÅŸ (`python -m playwright install chromium`)
- [ ] Hedef site bug bounty programÄ±nda veya izin alÄ±nmÄ±ÅŸ
- [ ] Komut doÄŸru: `python scan_website.py https://SITE.com`
- [ ] Terminal aÃ§Ä±k ve bekliyor
- [ ] SonuÃ§ dosyasÄ± oluÅŸtu (`scan-SITE.com.json`)

---

---

## ğŸ¤– AI Ä°LE OTOMATÄ°K ANALÄ°Z (YENÄ°!)

### OpenAI API Entegrasyonu

Bulunan endpoint'leri **otomatik** olarak gÃ¼venlik aÃ§Ä±klarÄ± iÃ§in analiz et!

**Ne Tespit Eder:**
- ğŸ”´ IDOR (Insecure Direct Object Reference)
- ğŸ”´ BOLA (Broken Object Level Authorization)
- ğŸŸ  SSRF (Server-Side Request Forgery)
- ğŸŸ  Mass Assignment
- ğŸŸ¡ Admin endpoint'leri

### Kurulum

```powershell
# OpenAI kÃ¼tÃ¼phanesi (zaten yÃ¼klÃ¼)
pip install openai

# API Key'ini ayarla
$env:OPENAI_API_KEY="sk-your-openai-api-key-here"
```

### KullanÄ±m

```powershell
# 1. Ã–nce siteyi tara
python scan_website.py https://www.lcw.com --pages 30

# 2. AI ile analiz et
python analyze_with_ai.py scan-www.lcw.com.json

# GPT-4 ile analiz (daha detaylÄ±, biraz pahalÄ±)
python analyze_with_ai.py scan-www.lcw.com.json --model gpt-4

# GPT-3.5 (varsayÄ±lan, ucuz, hÄ±zlÄ±)
python analyze_with_ai.py scan-www.lcw.com.json --model gpt-3.5-turbo
```

### Ã–rnek Ã‡Ä±ktÄ±

```
ğŸ¤– AI analizi baÅŸlatÄ±lÄ±yor...
ğŸ“Š 50 endpoint analiz ediliyor...
ğŸ”§ Model: gpt-3.5-turbo

============================================================
âš ï¸  TESPÄ°T EDÄ°LEN GÃœVENLÄ°K RÄ°SKLERÄ°
============================================================

ğŸ”´ Risk #1 - Critical
   Endpoint: DELETE /api/users/{userId}
   Tip: IDOR
   CVSS Score: 9.1
   AÃ§Ä±klama: userId parametresi ile baÅŸka kullanÄ±cÄ±lar silinebilir
   Test: FarklÄ± userId deÄŸerleri ile DELETE isteÄŸi gÃ¶nder

ğŸŸ  Risk #2 - High
   Endpoint: GET /api/orders/{orderId}
   Tip: BOLA
   CVSS Score: 7.5
   AÃ§Ä±klama: BaÅŸka kullanÄ±cÄ±nÄ±n sipariÅŸi gÃ¶rÃ¼ntÃ¼lenebilir
   Test: Kendi orderId'nden farklÄ± ID'lerle istek at

============================================================

ğŸ’¾ Analiz kaydedildi: scan-www.lcw.com-ai-analysis.json

ğŸ“Š Ã–zet: 1 Critical, 3 High risk bulundu
```

### Maliyet

**GPT-3.5-Turbo (Ã–nerilen):**
- ~$0.0005 per analiz (50 endpoint)
- HÄ±zlÄ±, ekonomik, yeterince iyi

**GPT-4:**
- ~$0.02 per analiz (50 endpoint)
- Daha detaylÄ±, daha pahalÄ±

### Komple Ä°ÅŸ AkÄ±ÅŸÄ±

```powershell
# 1. Siteyi tara
python scan_website.py https://target.com --pages 40

# 2. AI analizi yap
python analyze_with_ai.py scan-target.com.json

# 3. SonuÃ§larÄ± oku
Get-Content scan-target.com-ai-analysis.json | ConvertFrom-Json | 
  Select-Object -ExpandProperty risks | 
  Where-Object {$_.risk_level -eq "Critical"}
```

### Ä°puÃ§larÄ±

1. **Ä°lk 50 endpoint analiz edilir** (token limiti iÃ§in)
2. **GPT-3.5 yeterlidir** - GPT-4'e gerek yok genelde
3. **API Key'i gÃ¼vende tut** - .gitignore'a ekle
4. **Birden fazla tarama** iÃ§in loop kullan:

```powershell
$sites = @("lcw.com", "trendyol.com", "example.com")
foreach ($site in $sites) {
    python scan_website.py "https://www.$site" --pages 30
    python analyze_with_ai.py "scan-www.$site.json"
}
```

---

**Son gÃ¼ncelleme:** AralÄ±k 2025
**Versiyon:** 1.1 (AI Entegrasyonu Eklendi)
**GeliÅŸtirici:** Bug bounty aracÄ±

ğŸ”¥ Ä°yi taramalar!
